(this["webpackJsonpreact-form-validator"]=this["webpackJsonpreact-form-validator"]||[]).push([[0],{113:function(e,t,a){e.exports={wrapper:"Input_wrapper__1lk8b"}},145:function(e,t,a){e.exports=a(270)},150:function(e,t,a){},270:function(e,t,a){"use strict";a.r(t);var n,r,o=a(0),c=a.n(o),s=a(49),l=a.n(s),u=(a(150),a(70)),i=a.n(u),m=a(10),p=a(51),f=function(e){var t;return null===(t=e.form.form)||void 0===t?void 0:t.values},d=function(e){return e.auth.access_token},h=function(e){return e?void 0:"field is required"},_=function(e){return e&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)?"Invalid email address":void 0},v=function(e){return e&&/.+@aol\.com/.test(e)?"Really? You still use AOL for your email?":void 0},b=a(109),E=a(110),k=a(113),w=a.n(k),g=function(e){var t=e.input,a=e.name,n=e.meta,r=n.touched,o=n.error,s=n.warning;return c.a.createElement("div",{className:w.a.wrapper},c.a.createElement("div",null,c.a.createElement("input",Object.assign({},t,{placeholder:a}))),r&&(o&&c.a.createElement("span",null,o)||s&&c.a.createElement("span",null,s)))},O=a(72),j=a.n(O),N=(n=20,function(e){if(e&&e.length>n)return"Max length is ".concat(n," symbols")}),x=(r=8,function(e){return e&&e.length<r?"Must be ".concat(r," characters or more"):void 0}),y=Object(E.a)({form:"form"})((function(e){return c.a.createElement("form",{onSubmit:e.handleSubmit},c.a.createElement("div",{className:j.a.wrapper},c.a.createElement(b.a,{placeholder:"Email",name:"email",component:g,warn:v,validate:[h,_]})),c.a.createElement("div",{className:j.a.wrapper},c.a.createElement(b.a,{placeholder:"password",name:"password",component:g,validate:[h,x,N]})))})),A=a(75),T=a.n(A),S=a(115),B=a(39),z=a.n(B),C=a(119),M={access_token:null,refresh_token:null},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE-TOKENS":var a=Object(C.a)({},e);return a.access_token=t.access_token,a.refresh_token=t.refresh_token,a;default:return e}};function D(e,t,a){return function(){var n=Object(S.a)(T.a.mark((function n(r){var o,c,s,l;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={email:e,password:t,returnSecureToken:!0},c="http://142.93.134.108:1111/sign_up",a&&(c="http://142.93.134.108:1111/login?email=".concat(e,"&password=").concat(t)),n.next=5,z.a.post(c,o);case 5:s=n.sent,l=s.data,r(I(l.body.access_token,l.body.refresh_token));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function I(e,t){return{type:"UPDATE-TOKENS",access_token:e,refresh_token:t}}var W=a(40),J=a.n(W),K=function(){var e=Object(m.c)(),t=Object(m.d)(f);return c.a.createElement("div",{className:J.a.wrapper},c.a.createElement(y,{handleSubmit:function(e){console.log(e)}}),c.a.createElement("div",{className:J.a.button_block},c.a.createElement("div",{className:J.a.button},c.a.createElement("button",{onClick:function(){e(Object(p.a)("form")),e(D(t.email,t.password,!1))}},"sign up")),c.a.createElement("div",{className:J.a.button},c.a.createElement("button",{onClick:function(){e(D(t.email,t.password,!0))}},"Login"))))},L=a(116),P=a(7),R=a(118),U=a(76),$=a.n(U),q=function(e){return c.a.createElement("div",{className:$.a.wrapper},c.a.createElement("div",{className:$.a.text_message},e.message),c.a.createElement("button",{onClick:function(){e.refreshToken()}},"Refresh"))},F=Object(m.b)((function(e){return{access_token:e.auth.access_token,refresh_token:e.auth.refresh_token}}),null)((function(e){var t=Object(m.c)();var a={headers:{Authorization:"Bearer ".concat(e.access_token)}},n=Object(o.useState)(),r=Object(R.a)(n,2),s=r[0],l=r[1];return Object(o.useEffect)((function(){z.a.get("http://142.93.134.108:1111/me",a).then((function(e){l(e.data.body.message)})).catch((function(e){console.log(e)}))})),c.a.createElement(q,{refreshToken:function(){var a={headers:{Authorization:"Bearer ".concat(e.refresh_token)}};z.a.post("http://142.93.134.108:1111/refresh",null,a).then((function(e){console.log(e);var a=e.data;t(I(a.body.access_token,a.body.refresh_token))}))},message:s})}));var H=function(e){var t=Object(m.d)(d);return c.a.createElement(L.a,{basename:"/react-form-validation"},c.a.createElement("div",{className:i.a.App},c.a.createElement(P.d,null,c.a.createElement(P.b,{exact:!0,path:"/me"},t?c.a.createElement(F,null):c.a.createElement(P.a,{to:"/"})),c.a.createElement(P.b,{exact:!0,path:"/"},t?c.a.createElement(P.a,{to:"/me"}):c.a.createElement(K,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=a(8),V=a(111),X=a(117),Y=Object(Q.c)({form:V.a,auth:Z}),G=Object(Q.d)(Y,Object(Q.a)(X.a));window.store=G;var ee=G;l.a.render(c.a.createElement(m.a,{store:ee},c.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},40:function(e,t,a){e.exports={wrapper:"Auth_wrapper__zD_NT",button_block:"Auth_button_block__3Z597",button:"Auth_button__1BtHV"}},70:function(e,t,a){},72:function(e,t,a){e.exports={wrapper:"Form_wrapper__rpQC8"}},76:function(e,t,a){e.exports={wrapper:"Me_wrapper__29mX7",text_message:"Me_text_message__3WuzN"}}},[[145,1,2]]]);
//# sourceMappingURL=main.06c5da95.chunk.js.map